(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{664:function(t,e,a){"use strict";a.r(e);var r=a(5),_=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1、小程序的双线程模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、小程序的双线程模型"}},[t._v("#")]),t._v(" 1、小程序的双线程模型")]),t._v(" "),a("h3",{attrs:{id:"_1-1-小程序的架构模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-小程序的架构模型"}},[t._v("#")]),t._v(" 1.1.小程序的架构模型")]),t._v(" "),a("ul",[a("li",[t._v("谁是小程序的宿主环境呢？"),a("strong",[t._v("微信客户端")]),t._v(" "),a("ul",[a("li",[t._v("宿主环境为了执行小程序的各种文件：wxml文件、wxss文件、js文件")])])]),t._v(" "),a("li",[t._v("当小程序"),a("strong",[t._v("基于 WebView 环境下")]),t._v("时，"),a("strong",[t._v("WebView 的 JS 逻辑、DOM 树创建、CSS 解析、样式计算、Layout、Paint (Composite)")]),t._v(" "),a("strong",[t._v("都发生在同一线程")]),t._v("，"),a("strong",[t._v("在 WebView 上执行过多的 JS 逻辑可能阻塞渲染，导致界面卡顿。")])]),t._v(" "),a("li",[a("strong",[t._v("以此为前提，小程序同时考虑了性能与安全，采用了目前称为「双线程模型」的架构。")]),t._v(" "),a("ul",[a("li",[t._v("双线程模型：")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/11/1d8ddd23115470aaf.png",alt:"1d8ddd23115470aaf.png"}})]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("双线程模型")]),t._v("：（以更多内存为前提，消耗更多的内存）\n"),a("ul",[a("li",[t._v("WXML模块和WXSS样式运行于 渲染层，渲染层使用WebView线程渲染（一个程序有多个页面，会使用多个WebView的线程）。")]),t._v(" "),a("li",[t._v("JS脚本（app.js/home.js等）运行于 逻辑层，"),a("strong",[t._v("逻辑层使用JsCore运行JS脚本")]),t._v("。")]),t._v(" "),a("li",[t._v("这两个线程都会经由微信客户端（Native）进行中转交互。")]),t._v(" "),a("li",[t._v("补充：WebView的渲染还有有点类似于渲染网页的过程的")]),t._v(" "),a("li",[t._v("现在看微信小程序文档看到了：在 WebView 渲染之外新增了一个渲染引擎 Skyline（当然现在还是处于Beta阶段）可以去了解了解，这让微信小程序更接近于原生App的体验："),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/introduction.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染引擎Skyline"),a("OutboundLink")],1)])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/11/29101ffd81f041f09.png",alt:"29101ffd81f041f09.png"}})]),t._v(" "),a("h2",{attrs:{id:"_2、不同配置文件的区分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、不同配置文件的区分"}},[t._v("#")]),t._v(" 2、不同配置文件的区分")]),t._v(" "),a("h3",{attrs:{id:"_2-1-小程序的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-小程序的配置文件"}},[t._v("#")]),t._v(" 2.1.小程序的配置文件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("小程序的很多开发需求被规定在了配置文件中。")])]),t._v(" "),a("li",[a("p",[t._v("为什么这样做呢?")]),t._v(" "),a("ul",[a("li",[t._v("这样做可以更有利于我们的开发效率；")]),t._v(" "),a("li",[t._v("并且可以保证开发出来的小程序的某些风格是比较一致的；")]),t._v(" "),a("li",[t._v("比如导航栏 – 顶部TabBar，以及页面路由等等。")])])]),t._v(" "),a("li",[a("p",[t._v("常见的配置文件有哪些呢?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("project.config.json")]),t._v("："),a("strong",[t._v("项目配置文件")]),t._v(", 比如项目名称、appid，基础库的版本等；"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("project.config.json配置"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("project.private.config.json")]),t._v("："),a("strong",[t._v("项目私有配置文件")]),t._v("。此文件中的内容将覆盖 project.config.json 中的相同字段（即 在两文件中有相同字段的情况下；project.private.config.json文件的优先级高于 project.config.json文件 的相同字段）\n"),a("ul",[a("li",[t._v("举个例子：如你重新选择基础库后，会在此私有配置文件进行配置如："),a("code",[t._v('"libVersion":"2.27.2"')]),t._v("；从而优先于project.config.json中配置的基础库，但是project.config.json中的配置不会有变化；")]),t._v(" "),a("li",[t._v("在多人开发同一个小程序的时候，开发人员在本地测试时难免有时候会选择不同基础库，为了维护多人开发使用同一基础库；所以出现了这个项目私有配置文件；不同开发人员改基础库版本，或者其他项目的配置项时，改的是他们自己的项目私有配置文件，并不会影响project.config.json文件【而这个项目私有配置文件我们一般会在.gitignore文件中设置忽略它的提交】")])])]),t._v(" "),a("li",[a("code",[t._v("sitemap.json")]),t._v("："),a("strong",[t._v("小程序搜索相关的")]),t._v("；"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("sitemap.json配置"),a("OutboundLink")],1),t._v("   有点类似于网页的SEO优化，让用户更容易搜索到")]),t._v(" "),a("li",[a("code",[t._v("app.json")]),t._v("："),a("strong",[t._v("全局配置")]),t._v("；")]),t._v(" "),a("li",[a("code",[t._v("page.json")]),t._v("："),a("strong",[t._v("页面配置")]),t._v("；")])])])]),t._v(" "),a("h2",{attrs:{id:"_3、全局配置文件app-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、全局配置文件app-json"}},[t._v("#")]),t._v(" 3、全局配置文件app.json")]),t._v(" "),a("h3",{attrs:{id:"_3-1-全局app配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-全局app配置文件"}},[t._v("#")]),t._v(" 3.1.全局app配置文件")]),t._v(" "),a("ul",[a("li",[t._v("全局配置比较多, 完整的查看官方文档. "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("app.json全局配置文件"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("常见的几个重要的配置项如下")])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("属性")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("必填")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("pages")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String[]")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("页面的路径列表")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("window")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("全局的默认窗口表现")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("tabBar")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("底部tab栏的表现")])])])]),t._v(" "),a("ul",[a("li",[t._v("pages: "),a("strong",[t._v("页面路径列表")]),t._v(" "),a("ul",[a("li",[t._v("用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。")]),t._v(" "),a("li",[t._v("小程序中所有的页面都是必须在pages中进行注册的。")])])]),t._v(" "),a("li",[t._v("window: "),a("strong",[t._v("全局的默认窗口展示")]),t._v(" "),a("ul",[a("li",[t._v("用户指定窗口如何展示, 其中还包含了很多其他的属性")])])]),t._v(" "),a("li",[t._v("tabBar: "),a("strong",[t._v("底部tab栏的展示")]),t._v(" "),a("ul",[a("li",[t._v("具体属性可以查看官方文档一一学习")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-全局配置案例实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-全局配置案例实现"}},[t._v("#")]),t._v(" 3.2.全局配置案例实现")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/12/3.png",alt:"3.png"}})]),t._v(" "),a("h2",{attrs:{id:"_4、页面配置文件page-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、页面配置文件page-json"}},[t._v("#")]),t._v(" 4、页面配置文件page.json")]),t._v(" "),a("h3",{attrs:{id:"_4-1-页面page配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-页面page配置文件"}},[t._v("#")]),t._v(" 4.1.页面page配置文件")]),t._v(" "),a("ul",[a("li",[t._v("每一个小程序页面也可以使用 .json 文件来对本页面的窗口表现进行配置。\n"),a("ul",[a("li",[t._v("页面中配置项在当前页面会覆盖 app.json 的 window 中相同的配置项。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("page.json页面配置"),a("OutboundLink")],1)])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/4.png",alt:"4.png"}})]),t._v(" "),a("h2",{attrs:{id:"_5、注册app实例的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、注册app实例的操作"}},[t._v("#")]),t._v(" 5、注册App实例的操作")]),t._v(" "),a("h3",{attrs:{id:"_5-1-注册小程序-app函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-注册小程序-app函数"}},[t._v("#")]),t._v(" 5.1.注册小程序 – App函数")]),t._v(" "),a("ul",[a("li",[t._v("每个小程序都需要在 app.js 中调用 App 函数 注册小程序示例")]),t._v(" "),a("li",[t._v("在注册时, 可以绑定对应的生命周期函数；")]),t._v(" "),a("li",[t._v("在生命周期函数中, 执行对应的代码；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("App函数"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("我们来思考：注册App时，我们一般会做什么呢？\n"),a("ol",[a("li",[t._v("判断小程序的进入场景")]),t._v(" "),a("li",[t._v("监听生命周期函数，在生命周期中执行对应的业务逻辑，比如在某个生命周期函数中进行登录操作或者请求网络数据；")]),t._v(" "),a("li",[t._v("因为App()实例只有一个，并且是全局共享的（单例对象），所以我们可以将一些共享数据放在这里；【然后可以通过getApp进行获取；getApp获取到小程序全局唯一的 "),a("code",[t._v("App")]),t._v(" 实例。】")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-2-app函数的参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-app函数的参数"}},[t._v("#")]),t._v(" 5.2.App函数的参数")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/5.png",alt:"5.png"}})]),t._v(" "),a("h3",{attrs:{id:"_5-3-作用一-判断打开场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-作用一-判断打开场景"}},[t._v("#")]),t._v(" 5.3.作用一：判断打开场景")]),t._v(" "),a("ul",[a("li",[t._v("小程序的打开场景较多：\n"),a("ul",[a("li",[t._v("常见的打开场景值：群聊会话中打开、小程序列表中打开、微信扫一扫打开、另一个小程序打开:"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序打开场景值参考"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[t._v("如何确定场景?\n"),a("ul",[a("li",[a("strong",[t._v("在onLaunch和onShow生命周期回调函数中")]),t._v("，"),a("strong",[t._v("会有options参数")]),t._v("，"),a("strong",[t._v("其中有scene值")]),t._v("；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/6.png",alt:"6.png"}})]),t._v(" "),a("h3",{attrs:{id:"_5-4-作用二-定义全局app的数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-作用二-定义全局app的数据"}},[t._v("#")]),t._v(" 5.4.作用二：定义全局App的数据")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("可以在Object中定义全局App的数据")])]),t._v(" "),a("li",[a("p",[t._v("定义的数据可以在其他任何页面中访问：")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/7.png",alt:"7.png"}})]),t._v(" "),a("h3",{attrs:{id:"_5-5-作用三-生命周期函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-作用三-生命周期函数"}},[t._v("#")]),t._v(" 5.5.作用三 – 生命周期函数")]),t._v(" "),a("ul",[a("li",[t._v("在生命周期函数中，完成应用程序启动后的初始化操作\n"),a("ul",[a("li",[t._v("比如登录操作（这个后续学习）；")]),t._v(" "),a("li",[t._v("比如读取本地数据（类似于token，然后保存在全局方便使用）")]),t._v(" "),a("li",[t._v("比如请求整个应用程序需要的数据；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/8.png",alt:"8.png"}})]),t._v(" "),a("h2",{attrs:{id:"_6、注册page实例的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、注册page实例的操作"}},[t._v("#")]),t._v(" 6、注册Page实例的操作")]),t._v(" "),a("h3",{attrs:{id:"_6-1-注册页面-page函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-注册页面-page函数"}},[t._v("#")]),t._v(" 6.1.注册页面 – Page函数")]),t._v(" "),a("ul",[a("li",[t._v("小程序中的每个页面, 都有一个对应的js文件, 其中调用Page函数注册页面示例\n"),a("ul",[a("li",[t._v("在注册时, 可以绑定初始化数据、生命周期回调、事件处理函数等。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Page函数"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[t._v("我们来思考：注册一个Page页面时，我们一般需要做什么呢？\n"),a("ol",[a("li",[t._v("在生命周期函数中发送网络请求，从服务器获取数据；")]),t._v(" "),a("li",[t._v("初始化一些数据，以方便被wxml引用展示；")]),t._v(" "),a("li",[t._v("监听wxml中的事件，绑定对应的事件函数；")]),t._v(" "),a("li",[t._v("其他一些监听（比如页面滚动、上拉刷新、下拉加载更多等）；")])])])]),t._v(" "),a("h3",{attrs:{id:"_6-2-注册page时做什么呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-注册page时做什么呢"}},[t._v("#")]),t._v(" 6.2.注册Page时做什么呢?")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/9.png",alt:"9.png"}})]),t._v(" "),a("h3",{attrs:{id:"_6-3-page页面的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-page页面的生命周期"}},[t._v("#")]),t._v(" 6.3.Page页面的生命周期")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page-life-cycle.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Page页面的生命周期"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/10.png",alt:"10.png"}})]),t._v(" "),a("h3",{attrs:{id:"_6-4-上拉和下拉及页面滚动的监听"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-上拉和下拉及页面滚动的监听"}},[t._v("#")]),t._v(" 6.4.上拉和下拉及页面滚动的监听")]),t._v(" "),a("ul",[a("li",[t._v("监听页面的"),a("strong",[t._v("下拉刷新")]),t._v("和"),a("strong",[t._v("上拉加载更多")]),t._v("和 页面滚动(不需要配置页面的json文件)：\n"),a("ul",[a("li",[t._v("步骤一：配置页面的json文件；")]),t._v(" "),a("li",[t._v("步骤二：代码中进行监听；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/11/13/11.png",alt:"11.png"}})])])}),[],!1,null,null,null);e.default=_.exports}}]);