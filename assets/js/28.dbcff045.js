(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{616:function(t,a,s){"use strict";s.r(a);var e=s(5),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("a",{attrs:{href:"https://github.com/lyk19990226/WebpackFoundation",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack整个演练案例代码"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_1、webpack常见的插件plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、webpack常见的插件plugin"}},[t._v("#")]),t._v(" 1、webpack常见的插件Plugin")]),t._v(" "),s("h3",{attrs:{id:"_1-1-认识plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-认识plugin"}},[t._v("#")]),t._v(" 1.1.认识Plugin")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://webpack.js.org/concepts/plugins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack插件描述"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://webpack.js.org/plugins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack插件一览"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("Webpack的另一个核心是Plugin，官方有这样一段对Plugin的描述：")]),t._v(" "),s("ul",[s("li",[t._v("While loaders are used to transform certain types of modules, plugins can be leveraged to perform a wider range of tasks like bundle optimization, asset management and injection of environment variables.")])])]),t._v(" "),s("li",[s("p",[t._v("上面表达的含义翻译过来就是：")]),t._v(" "),s("ul",[s("li",[t._v("Loader是用于特定的模块类型进行转换；")]),t._v(" "),s("li",[t._v("Plugin可以用于执行更加广泛的任务，比如打包优化、资源管理、环境变量注入等；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/1.png",alt:"1.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-2-cleanwebpackplugin插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-cleanwebpackplugin插件"}},[t._v("#")]),t._v(" 1.2.CleanWebpackPlugin插件")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("前面我们演示的过程中，每次修改了一些配置，重新打包时，都需要手动删除dist文件夹：")])]),t._v(" "),s("li",[s("p",[t._v("我们可以借助于一个插件来帮助我们完成，这个插件就是CleanWebpackPlugin；")]),t._v(" "),s("ul",[s("li",[t._v("首先，我们先安装这个插件：")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" clean-webpack-plugin -D\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("之后在插件中配置即可")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/2.png",alt:"2.png"}})]),t._v(" "),s("ul",[s("li",[t._v("当然不借助该CleanWebpackPlugin插件，也可以用如下配置，进行清除输出目录\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://webpack.js.org/configuration/output/#outputclean",target:"_blank",rel:"noopener noreferrer"}},[t._v("output.clean"),s("OutboundLink")],1)])])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clean")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在发出（打包完成）之前清理输出目录")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_1-3-htmlwebpackplugin插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-htmlwebpackplugin插件"}},[t._v("#")]),t._v(" 1.3.HtmlWebpackPlugin插件")]),t._v(" "),s("ul",[s("li",[t._v("另外还有一个不太规范的地方：\n"),s("ul",[s("li",[t._v("我们的HTML文件是编写在根目录下的，而最终打包的dist文件夹中是没有index.html文件的。")]),t._v(" "),s("li",[t._v("在进行项目部署的时，必然也是需要有对应的入口文件index.html；")]),t._v(" "),s("li",[t._v("所以我们也需要对index.html进行打包处理；")])])]),t._v(" "),s("li",[t._v("对HTML进行打包处理我们可以使用另外一个插件：HtmlWebpackPlugin；")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" html-webpack-plugin -D\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("之后在插件中配置即可")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/3.png",alt:"3.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-4-生成index-html分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-生成index-html分析"}},[t._v("#")]),t._v(" 1.4.生成index.html分析")]),t._v(" "),s("ul",[s("li",[t._v("我们会发现，现在自动在dist文件夹中，生成了一个index.html的文件：\n"),s("ul",[s("li",[t._v("该文件中也自动添加了我们打包的bundle.js文件；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/4.png",alt:"4.png"}})]),t._v(" "),s("ul",[s("li",[t._v("这个文件是如何生成的呢？\n"),s("ul",[s("li",[t._v("默认情况下是根据"),s("strong",[t._v("ejs的一个模板")]),t._v("来生成的；")]),t._v(" "),s("li",[t._v("在html-webpack-plugin的源码中，有一个default_index.ejs模块；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/5.png",alt:"5.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-5-自定义html模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-自定义html模板"}},[t._v("#")]),t._v(" 1.5.自定义HTML模板")]),t._v(" "),s("ul",[s("li",[t._v("如果我们想在自己的模块中加入一些比较特别的内容：\n"),s("ul",[s("li",[t._v("比如添加一个noscript标签，在用户的JavaScript被关闭时，给予响应的提示；")]),t._v(" "),s("li",[t._v("比如在开发vue或者react项目时，我们需要一个可以挂载后续组件的根标签 ；")])])]),t._v(" "),s("li",[t._v("这个我们需要一个属于自己的index.html模块：")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("IE=edge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width,initial-scale=1.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("icon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= BASE_URL %>favicon.ico"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("<%= htmlWebpackPlugin.options.title %>"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("noscript")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("strong")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue."),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("strong")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("noscript")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- built files will be auto injected --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/65866ba6763d59312.png",alt:"65866ba6763d59312.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-6-自定义模板数据填充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-自定义模板数据填充"}},[t._v("#")]),t._v(" 1.6.自定义模板数据填充")]),t._v(" "),s("ul",[s("li",[t._v("上面的代码中，会有一些类似这样的语法<% 变量 %>，这个是EJS模块填充数据的方式。")]),t._v(" "),s("li",[t._v("在配置HtmlWebpackPlugin时，我们可以添加如下配置：\n"),s("ul",[s("li",[t._v("template：指定我们要使用的模块所在的路径；")]),t._v(" "),s("li",[t._v("title：在进行htmlWebpackPlugin.options.title读取时，就会读到该信息；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/7.png",alt:"7.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-7-defineplugin插件的介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-defineplugin插件的介绍"}},[t._v("#")]),t._v(" 1.7.DefinePlugin插件的介绍")]),t._v(" "),s("ul",[s("li",[t._v("但是，这个时候编译还是会报错，因为在我们的模块中还使用到一个BASE_URL的常量：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/8.png",alt:"8.png"}})]),t._v(" "),s("ul",[s("li",[t._v("这是因为在编译template模块时，有一个BASE_URL：\n"),s("ul",[s("li",[s("code",[t._v('<link rel="icon" href="<%= BASE_URL %>favicon.ico">；')])]),t._v(" "),s("li",[t._v("但是我们并没有设置过这个常量值，所以会出现没有定义的错误；")])])]),t._v(" "),s("li",[t._v("这个时候我们可以使用DefinePlugin插件；")])]),t._v(" "),s("h3",{attrs:{id:"_1-8-defineplugin的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-defineplugin的使用"}},[t._v("#")]),t._v(" 1.8.DefinePlugin的使用")]),t._v(" "),s("ul",[s("li",[t._v("DefinePlugin允许在编译时创建配置的全局常量，是一个webpack内置的插件（不需要单独安装）：")]),t._v(" "),s("li",[t._v("这个时候，编译template就可以正确的编译了，会读取到BASE_URL的值；")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/9.png",alt:"9.png"}})]),t._v(" "),s("ul",[s("li",[t._v("打包后生成的html")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/10.png",alt:"10.png"}})]),t._v(" "),s("h2",{attrs:{id:"_2、mode配置-模式配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、mode配置-模式配置"}},[t._v("#")]),t._v(" 2、Mode配置（模式配置）")]),t._v(" "),s("h3",{attrs:{id:"_2-1-mode配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mode配置"}},[t._v("#")]),t._v(" 2.1.Mode配置")]),t._v(" "),s("ul",[s("li",[t._v("前面我们一直没有讲mode。但是你会发现打包成功了，有时候会有一些警告；其中就有mode的警告\n"),s("ul",[s("li",[t._v('但是当你把模式设置成开发模式时：mode:"development"')]),t._v(" "),s("li",[t._v("开发模式不会有警告；因为不像生产模式一样要上线展示给大量用户，默认webpack打包忽略性能警告；但是如果是生产模式，如果打包生成的包过大，会有性能相关提示警告；")]),t._v(" "),s("li",[t._v("如下：就是生产模式时打包后的警告")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/11aa1affa2e5b283eb.png",alt:"11aa1affa2e5b283eb.png"}})]),t._v(" "),s("ul",[s("li",[t._v("Mode配置选项，可以告知webpack使用相应模式的内置优化：\n"),s("ul",[s("li",[t._v("默认值是production（生产模式）（什么都不设置的情况下）；")]),t._v(" "),s("li",[t._v("可选值有：'none' | 'development' | 'production'；【development -> 开发模式】")])])]),t._v(" "),s("li",[t._v("这几个选项有什么样的区别呢？")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/12.png",alt:"12.png"}})]),t._v(" "),s("ul",[s("li",[t._v("mode的配置")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在webpack.config.js文件中")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//其他配置省略")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_2-2-mode配置代表什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mode配置代表什么"}},[t._v("#")]),t._v(" 2.2.Mode配置代表什么？")]),t._v(" "),s("ul",[s("li",[t._v("如下图，设置一个模式，相当于设置了如下红色字体的这些配置；")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/13.png",alt:"13.png"}})]),t._v(" "),s("h2",{attrs:{id:"_3、开启本地服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、开启本地服务器"}},[t._v("#")]),t._v(" 3、开启本地服务器")]),t._v(" "),s("h3",{attrs:{id:"_3-1-为什么要搭建本地服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-为什么要搭建本地服务器"}},[t._v("#")]),t._v(" 3.1.为什么要搭建本地服务器？")]),t._v(" "),s("ul",[s("li",[t._v("目前我们开发的代码，为了运行需要有两个操作：\n"),s("ul",[s("li",[t._v("操作一：npm run build，编译相关的代码；")]),t._v(" "),s("li",[t._v("操作二：通过live server或者直接通过浏览器，打开index.html代码，查看效果；")])])]),t._v(" "),s("li",[t._v("这个过程经常操作会影响我们的开发效率，我们希望可以做到，当文件发生变化时，可以自动的完成 编译 和 展示；")]),t._v(" "),s("li",[t._v("为了完成自动编译，webpack提供了几种可选的方式：\n"),s("ul",[s("li",[t._v("webpack watch mode；")]),t._v(" "),s("li",[t._v("webpack-dev-server（常用）；")]),t._v(" "),s("li",[t._v("webpack-dev-middleware；")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-webpack-dev-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-webpack-dev-server"}},[t._v("#")]),t._v(" 3.2.webpack-dev-server")]),t._v(" "),s("ul",[s("li",[t._v("上面的方式可以监听到文件的变化，但是事实上它本身是没有自动刷新浏览器的功能的：\n"),s("ul",[s("li",[t._v("当然，目前我们可以在VSCode中使用live-server来完成这样的功能；")]),t._v(" "),s("li",[t._v("但是，我们希望在不适用live-server的情况下，可以具备live reloading（实时重新加载）的功能；")])])]),t._v(" "),s("li",[t._v("安装webpack-dev-server")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" webpack-dev-server -D\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("p",[t._v("修改如下图配置文件，启动时加上serve参数：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在webpack.config.js文件中")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//其他配置...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//该项可配置，可不配置，都会开启本地服务")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//hot: true,//开启热模块替换 -> 后面有讲")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// host: "0.0.0.0",')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// port: 8888,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//open: true//启动本地服务成功后，自动打开对应网页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compress: true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在package.json文件夹中  加上serve 配置  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//其他配置...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config wk.config.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"serve"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack serve --config wk.config.js"')]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/14.png",alt:"14.png"}})]),t._v(" "),s("ul",[s("li",[t._v("webpack-dev-server 在编译之后不会写入到任何输出文件，而是将 bundle 文件保留在内存中：\n"),s("ul",[s("li",[t._v("事实上webpack-dev-server使用了一个库叫memfs（memory-fs webpack自己写的）")])])])]),t._v(" "),s("h2",{attrs:{id:"_4、devserver配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、devserver配置"}},[t._v("#")]),t._v(" 4、devServer配置")]),t._v(" "),s("h3",{attrs:{id:"_4-1-host配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-host配置"}},[t._v("#")]),t._v(" 4.1.host配置")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("host设置主机地址：")]),t._v(" "),s("ul",[s("li",[t._v("默认值是localhost；")]),t._v(" "),s("li",[t._v("如果希望其他地方也可以访问，可以设置为 0.0.0.0；")])])]),t._v(" "),s("li",[s("p",[t._v("localhost 和 0.0.0.0 的区别：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("localhost：本质上是一个域名，通常情况下会被解析成127.0.0.1;")])]),t._v(" "),s("li",[s("p",[t._v("127.0.0.1：回环地址(Loop Back Address)，表达的意思其实是我们主机自己发出去的包，直接被自己接收;")]),t._v(" "),s("ul",[s("li",[t._v("正常的数据库包经常 应用层 - 传输层 - 网络层 - 数据链路层 - 物理层 ;")]),t._v(" "),s("li",[t._v("而回环地址，是在网络层直接就被获取到了，是不会经常数据链路层和物理层的;")]),t._v(" "),s("li",[t._v("比如我们监听 127.0.0.1时，在同一个网段下的主机中，通过ip地址是不能访问的;")])])]),t._v(" "),s("li",[s("p",[t._v("0.0.0.0：监听IPV4上所有的地址，再根据端口找到不同的应用程序;")]),t._v(" "),s("ul",[s("li",[t._v("比如我们监听 0.0.0.0时，在同一个网段下的主机中，通过ip地址是可以访问的")])])])])])]),t._v(" "),s("h3",{attrs:{id:"_4-2-port、open、compress"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-port、open、compress"}},[t._v("#")]),t._v(" 4.2.port、open、compress")]),t._v(" "),s("ul",[s("li",[t._v("port设置监听的端口，默认情况下是8080")]),t._v(" "),s("li",[t._v("open是否打开浏览器：\n"),s("ul",[s("li",[t._v("默认值是false，设置为true会打开浏览器；")]),t._v(" "),s("li",[t._v("也可以设置为类似于 Google Chrome等值；")])])]),t._v(" "),s("li",[t._v("compress是否为静态文件开启gzip compression：\n"),s("ul",[s("li",[t._v("默认值是false，可以设置为true；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/15faea5809adde25b7.png",alt:"15faea5809adde25b7.png"}})]),t._v(" "),s("h2",{attrs:{id:"_5、hmr热模块替换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、hmr热模块替换"}},[t._v("#")]),t._v(" 5、HMR热模块替换")]),t._v(" "),s("h3",{attrs:{id:"_5-1-认识模块热替换-hmr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-认识模块热替换-hmr"}},[t._v("#")]),t._v(" 5.1.认识模块热替换（HMR）")]),t._v(" "),s("ul",[s("li",[t._v("什么是HMR呢？\n"),s("ul",[s("li",[t._v("HMR的全称是Hot Module Replacement，翻译为模块热替换；")]),t._v(" "),s("li",[t._v("模块热替换是指在 应用程序运行过程中，替换、添加、删除模块，而无需重新刷新整个页面；")])])]),t._v(" "),s("li",[t._v("HMR通过如下几种方式，来提高开发的速度：\n"),s("ul",[s("li",[t._v("不重新加载整个页面，这样可以保留某些应用程序的状态不丢失；")]),t._v(" "),s("li",[t._v("只更新需要变化的内容，节省开发的时间；")]),t._v(" "),s("li",[t._v("修改了css、js源代码，会立即在浏览器更新，相当于直接在浏览器的devtools中直接修改样式；")])])]),t._v(" "),s("li",[t._v("如何使用HMR呢？\n"),s("ul",[s("li",[t._v("默认情况下，webpack-dev-server已经支持HMR，我们只需要开启即可（默认已经开启）；")]),t._v(" "),s("li",[t._v("在不开启HMR的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是live reloading；")])])])]),t._v(" "),s("h3",{attrs:{id:"_5-2-开启hmr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-开启hmr"}},[t._v("#")]),t._v(" 5.2.开启HMR")]),t._v(" "),s("ul",[s("li",[t._v("修改webpack的配置：")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在webpack.config.js文件中")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//其他配置...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hot")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开启热模块替换 ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("ul",[s("li",[t._v("浏览器可以看到如下效果：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/162b6ef18f6868dddd.png",alt:"162b6ef18f6868dddd.png"}})]),t._v(" "),s("ul",[s("li",[t._v("但是你会发现，当我们修改了某一个模块的代码时，依然是刷新的整个页面：\n"),s("ul",[s("li",[t._v("这是因为我们需要去指定哪些模块发生更新时，进行HMR；如下图红框中进行的指定：\n"),s("ul",[s("li",[t._v("如demo.js模块,我们通过下图发现，demo模块更新没有刷新整个页面，因为该模块开启了HMR模块热替换")])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/178b114c84167ad1ff.png",alt:"178b114c84167ad1ff.png"}})]),t._v(" "),s("h3",{attrs:{id:"_5-3-框架的hmr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-框架的hmr"}},[t._v("#")]),t._v(" 5.3.框架的HMR")]),t._v(" "),s("ul",[s("li",[t._v("有一个问题：在开发其他项目时，我们是否需要经常手动去写入 module.hot.accpet相关的API呢？\n"),s("ul",[s("li",[t._v("比如开发Vue、React项目，我们修改了组件，希望进行热更新，这个时候应该如何去操作呢？")])])]),t._v(" "),s("li",[t._v("事实上社区已经针对这些有很成熟的解决方案了：\n"),s("ul",[s("li",[t._v("比如vue开发中，我们使用vue-loader，此loader支持vue组件的HMR，提供开箱即用的体验；")]),t._v(" "),s("li",[t._v("比如react开发中，有React Hot Loader，实时调整react组件（目前React官方已经弃用了，改成使用react-refresh）；")])])])]),t._v(" "),s("h2",{attrs:{id:"_6、proxy-vue项目学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、proxy-vue项目学习"}},[t._v("#")]),t._v(" 6、Proxy（Vue项目学习）")]),t._v(" "),s("ul",[s("li",[t._v("proxy是我们开发中非常常用的一个配置选项，它的目的设置代理来解决跨域访问的问题：\n"),s("ul",[s("li",[t._v("比如我们的一个api请求是 "),s("code",[t._v("http://localhost:8888")]),t._v("，但是本地启动服务器的域名是 "),s("code",[t._v("http://localhost:8000")]),t._v("，这个时候发送网络请求就会出现跨域的问题；")]),t._v(" "),s("li",[t._v("那么我们可以将请求先发送到一个代理服务器，代理服务器和API服务器没有跨域的问题，就可以解决我们的跨域问题了；")])])]),t._v(" "),s("li",[t._v("我们可以进行如下的设置：\n"),s("ul",[s("li",[t._v("target：表示的是代理到的目标地址，比如 /api-hy/moment会被代理到"),s("code",[t._v("http://localhost:8888/api-hy/moment")]),t._v("；")]),t._v(" "),s("li",[t._v("pathRewrite：默认情况下，我们的 /api-hy 也会被写入到URL中，如果希望删除，可以使用pathRewrite；")]),t._v(" "),s("li",[t._v("secure：默认情况下不接收转发到https的服务器上，如果希望支持，可以设置为false；")]),t._v(" "),s("li",[t._v("changeOrigin：它表示是否更新代理后请求的headers中host地址；")])])])]),t._v(" "),s("h2",{attrs:{id:"_7、changeorigin的解析-vue项目学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、changeorigin的解析-vue项目学习"}},[t._v("#")]),t._v(" 7、changeOrigin的解析（Vue项目学习）")]),t._v(" "),s("ul",[s("li",[t._v("这个 changeOrigin官方说的非常模糊，通过查看源码我发现其实是要修改代理请求中的headers中的host属性：\n"),s("ul",[s("li",[t._v("因为我们真实的请求，其实是需要通过 http://localhost:8888来请求的；")]),t._v(" "),s("li",[t._v("但是因为使用了代码，默认情况下它的值时 http://localhost:8000；")]),t._v(" "),s("li",[t._v("如果我们需要修改，那么可以将changeOrigin设置为true即可；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/180eb4cc010704019b.png",alt:"180eb4cc010704019b.png"}})]),t._v(" "),s("h2",{attrs:{id:"_8、historyapifallback-vue项目学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、historyapifallback-vue项目学习"}},[t._v("#")]),t._v(" 8、historyApiFallback （Vue项目学习）")]),t._v(" "),s("ul",[s("li",[t._v("historyApiFallback是开发中一个非常常见的属性，它主要的作用是解决SPA页面在路由跳转之后，进行页面刷新时，返回404的错误。")]),t._v(" "),s("li",[t._v("boolean值：默认是false")]),t._v(" "),s("li",[t._v("如果设置为true，那么在刷新时，返回404错误时，会自动返回 index.html 的内容；")]),t._v(" "),s("li",[t._v("object类型的值，可以配置rewrites属性：")]),t._v(" "),s("li",[t._v("可以配置from来匹配路径，决定要跳转到哪一个页面；")]),t._v(" "),s("li",[t._v("事实上devServer中实现historyApiFallback功能是通过connect-history-api-fallback库的：")]),t._v(" "),s("li",[t._v("可以查看connect-history-api-fallback 文档")])]),t._v(" "),s("h2",{attrs:{id:"_9、区分开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9、区分开发环境"}},[t._v("#")]),t._v(" 9、区分开发环境")]),t._v(" "),s("h3",{attrs:{id:"_9-1-如何区分开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-如何区分开发环境"}},[t._v("#")]),t._v(" 9.1.如何区分开发环境")]),t._v(" "),s("ul",[s("li",[t._v("目前我们所有的webpack配置信息都是放到一个配置文件中的：webpack.config.js\n"),s("ul",[s("li",[t._v("当配置越来越多时，这个文件会变得越来越不容易维护；")]),t._v(" "),s("li",[t._v("并且某些配置是在开发环境需要使用的，某些配置是在生成环境需要使用的，当然某些配置是在开发和生成环境都会使用的；")]),t._v(" "),s("li",[t._v("所以，我们最好对配置进行划分，方便我们维护和管理；")])])]),t._v(" "),s("li",[t._v("那么，在启动时如何可以区分不同的配置呢？\n"),s("ul",[s("li",[t._v("方案一：编写两个不同的配置文件，开发和生成时，分别加载不同的配置文件即可；")]),t._v(" "),s("li",[t._v("方式二：使用相同的一个入口配置文件，通过设置参数来区分它们；")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/19406d5d5367883d21.png",alt:"19406d5d5367883d21.png"}})]),t._v(" "),s("h3",{attrs:{id:"_9-2-入口文件解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-入口文件解析"}},[t._v("#")]),t._v(" 9.2.入口文件解析")]),t._v(" "),s("ul",[s("li",[t._v("我们之前编写入口文件的规则是这样的：./src/index.js，但是如果我们的配置文件所在的位置变成了 config 目录，我们是否应该变成 ../src/index.js呢？\n"),s("ul",[s("li",[t._v("如果我们这样编写，会发现是报错的，依然要写成 ./src/index.js；")]),t._v(" "),s("li",[t._v("这是因为入口文件其实是和另一个属性时有关的 context；")])])]),t._v(" "),s("li",[t._v("context的作用是用于解析入口（entry point）和加载器（loader）：\n"),s("ul",[s("li",[t._v("官方说法：默认是当前路径（但是经过我测试，默认应该是webpack的启动目录）")]),t._v(" "),s("li",[t._v("另外推荐在配置中传入一个值")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s1.imagehub.cc/images/2022/08/20/208101ec700f5b959c.png",alt:"208101ec700f5b959c.png"}})]),t._v(" "),s("h3",{attrs:{id:"_9-3-区分开发和生成环境配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-区分开发和生成环境配置"}},[t._v("#")]),t._v(" 9.3.区分开发和生成环境配置")]),t._v(" "),s("ul",[s("li",[t._v("这里我们创建三个文件：\n"),s("ul",[s("li",[t._v("webpack.comm.config.js")]),t._v(" "),s("li",[t._v("webpack.dev.config.js")]),t._v(" "),s("li",[t._v("webpack.prod.config.js")])])]),t._v(" "),s("li",[t._v("安装webpack-merge;完成上面文件的合并\n"),s("ul",[s("li",[t._v("webpack.comm.config.js和webpack.dev.config.js合并成开发环境配置")]),t._v(" "),s("li",[t._v("webpack.dev.config.js和webpack.prod.config.js  合并成生产环境配置")])])])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" webpack-merge -D\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("具体的分离代码："),s("a",{attrs:{href:"https://github.com/lyk19990226/WebpackFoundation",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码-18"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);