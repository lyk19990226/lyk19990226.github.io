(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{639:function(t,s,a){"use strict";a.r(s);var n=a(5),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1、javascript代码的执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、javascript代码的执行"}},[t._v("#")]),t._v(" 1、JavaScript代码的执行")]),t._v(" "),a("ul",[a("li",[t._v("JavaScript代码下载好之后，是如何一步步被执行的呢？")]),t._v(" "),a("li",[t._v("我们知道，浏览器内核是由两部分组成的，以webkit为例：\n"),a("ul",[a("li",[t._v("WebCore：负责HTML解析、布局、渲染等等相关的工作；（渲染引擎）")]),t._v(" "),a("li",[t._v("JavaScriptCore：解析、执行JavaScript代码；（JS引擎）")])])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://imgtu.com/i/jOU87n",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOU87n.png",alt:"jOU87n.png"}}),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("另外一个强大的JavaScript引擎就是V8引擎。")])]),t._v(" "),a("h2",{attrs:{id:"_2、v8引擎的执行原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、v8引擎的执行原理"}},[t._v("#")]),t._v(" 2、V8引擎的执行原理")]),t._v(" "),a("ul",[a("li",[t._v("我们来看一下官方对V8引擎的定义：\n"),a("ul",[a("li",[t._v("V8是用C ++编写的Google开源高性能JavaScript和WebAssembly引擎，它用于Chrome和Node.js等。")]),t._v(" "),a("li",[t._v("它实现ECMAScript和WebAssembly，并在Windows 7或更高版本，macOS 10.12+和使用x64，IA-32，ARM或MIPS处理器的Linux系统上运行。")]),t._v(" "),a("li",[t._v("V8可以独立运行，也可以嵌入到任何C ++应用程序中。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.modb.pro/db/252241",target:"_blank",rel:"noopener noreferrer"}},[t._v("V8引擎浅析"),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"https://www.cnblogs.com/cangqinglang/articles/14865719.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("V8执行js的过程"),a("OutboundLink")],1)])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOdZz8.png",alt:"jOdZz8.png"}})]),t._v(" "),a("h2",{attrs:{id:"_3、v8引擎的架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、v8引擎的架构"}},[t._v("#")]),t._v(" 3、V8引擎的架构")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("V8引擎本身的源码非常复杂，大概有超过100w行C++代码，通过了解它的架构，我们可以知道它是如何对JavaScript执行的：")])]),t._v(" "),a("li",[a("p",[t._v("Parse模块会将JavaScript代码通过词法分析，语法分析后转换成AST（抽象语法树），这是因为解释器并不直接认识JavaScript代码；")]),t._v(" "),a("ul",[a("li",[t._v("如果函数没有被调用，那么是不会被转换成AST的；")]),t._v(" "),a("li",[t._v("Parse的V8官方文档："),a("a",{attrs:{href:"https://v8.dev/blog/scanner",target:"_blank",rel:"noopener noreferrer"}},[t._v("Parse的V8官方文档"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("Ignition是一个解释器，会将AST转换成ByteCode（字节码）")]),t._v(" "),a("ul",[a("li",[t._v("同时会收集TurboFan优化所需要的信息（比如函数参数的类型信息，有了类型才能进行真实的运算）；")]),t._v(" "),a("li",[t._v("如果函数只调用一次，Ignition会解释执行ByteCode；")]),t._v(" "),a("li",[t._v("Ignition的V8官方文档："),a("a",{attrs:{href:"https://v8.dev/blog/ignition-interpreter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ignition的V8官方文档"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("p",[t._v("TurboFan是一个编译器，可以将字节码编译为CPU可以直接执行的机器码；")]),t._v(" "),a("ul",[a("li",[t._v("如果一个函数被多次调用，那么就会被标记为热点函数，那么就会经过TurboFan转换成可直接执行优化的机器码，提高代码的执行性能；")]),t._v(" "),a("li",[t._v("但是，机器码实际上也会被还原为ByteCode，这是因为如果后续执行函数的过程中，类型发生了变化（比如sum函数原来执行的是number类型，后来执行变成了string类型），之前优化的机器码并不能正确的处理运算，就会逆向的转换成字节码；")]),t._v(" "),a("li",[t._v("TurboFan的V8官方文档："),a("a",{attrs:{href:"https://v8.dev/blog/turbofan-jit",target:"_blank",rel:"noopener noreferrer"}},[t._v("TurboFan的V8官方文档"),a("OutboundLink")],1)])])])]),t._v(" "),a("h2",{attrs:{id:"_4、v8引擎的解析图-官方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、v8引擎的解析图-官方"}},[t._v("#")]),t._v(" 4、V8引擎的解析图（官方）")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("词法分析（英文lexical analysis）")]),t._v(" "),a("ul",[a("li",[t._v("将字符序列转换成token序列的过程。")]),t._v(" "),a("li",[t._v("token是记号化（tokenization）的缩写")]),t._v(" "),a("li",[t._v("词法分析器（lexical analyzer，简称lexer），也叫扫描器（scanner）")])])]),t._v(" "),a("li",[a("p",[t._v("语法分析（英语：syntactic analysis，也叫 parsing）")]),t._v(" "),a("ul",[a("li",[t._v("语法分析器也可以称之为parser。")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOdqOg.png",alt:"jOdqOg.png"}})]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("V8引擎的解析图")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOwSf0.png",alt:"jOwSf0.png"}})]),t._v(" "),a("h2",{attrs:{id:"_5、javascript代码执行原理-版本说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、javascript代码执行原理-版本说明"}},[t._v("#")]),t._v(" 5、JavaScript代码执行原理 - 版本说明")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在ECMA早期的版本中（ECMAScript3），代码的执行流程的术语和ECMAScript5以及之后的术语会有所区别：")]),t._v(" "),a("ul",[a("li",[t._v("目前网上大多数流行的说法都是基于ECMAScript3版本的解析，并且在面试时问到的大多数都是ECMAScript3的版本内容。")]),t._v(" "),a("li",[t._v("但是ECMAScript3终将过去， ECMAScript5必然会成为主流，所以最好也理解ECMAScript5甚至包括ECMAScript6以及更好版本的内容；")]),t._v(" "),a("li",[t._v("事实上在TC39（ ECMAScript5 ）的最新描述中，和ECMAScript5之后的版本又出现了一定的差异；")])])]),t._v(" "),a("li",[a("p",[t._v("那么我们按照如下顺序学习：")]),t._v(" "),a("ul",[a("li",[t._v("通过ECMAScript3中的概念学习JavaScript执行原理、作用域、作用域链、闭包等概念")]),t._v(" "),a("li",[t._v("通过ECMAScript5中的概念学习块级作用域、let、const等概念；")])])]),t._v(" "),a("li",[a("p",[t._v("事实上，它们只是在对某些概念上的描述不太一样，在整体思路上都是一致的。")])])]),t._v(" "),a("h2",{attrs:{id:"_6、javascript的执行过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、javascript的执行过程"}},[t._v("#")]),t._v(" 6、JavaScript的执行过程")]),t._v(" "),a("h3",{attrs:{id:"_6-1-js代码执行思考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-js代码执行思考"}},[t._v("#")]),t._v(" 6.1.js代码执行思考")]),t._v(" "),a("h5",{attrs:{id:"编写一段javascript代码-它是如何执行的呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写一段javascript代码-它是如何执行的呢"}},[t._v("#")]),t._v(" 编写一段JavaScript代码，它是如何执行的呢？")]),t._v(" "),a("ul",[a("li",[t._v("简单来说，JS引擎在执行JavaScript代码的过程中需要先解析再执行。那么在解析阶段JS引擎又会进行哪些操作，接下来就一起来了解一下JavaScript在执行过程中的详细过程，包括执行上下文、GO、AO、VO和VE等概念的理解。")])]),t._v(" "),a("h3",{attrs:{id:"_6-2-初始化全局对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-初始化全局对象"}},[t._v("#")]),t._v(" 6.2.初始化全局对象")]),t._v(" "),a("ul",[a("li",[t._v("首先，JS引擎会在执行代码之前，也就是解析代码时，会在我们的堆内存创建一个全局对象：Global Object（简称GO），观察以下代码，在全局中定义了几个变量：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'curry'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I am a coder'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("JS引擎内部在解析以上代码时，会创建一个全局对象（伪代码如下）：\n"),a("ul",[a("li",[t._v("所有的**作用域（scope）**都可以访问该全局对象；")]),t._v(" "),a("li",[t._v("对象里面会包含一些"),a("strong",[t._v("全局的方法和类")]),t._v("，像Math、Date、String、Array、setTimeout等等；")]),t._v(" "),a("li",[t._v("其中有一个"),a("strong",[t._v("window属性")]),t._v("是指向该全局对象自身的；")]),t._v(" "),a("li",[t._v("该对象中会收集我们上面全局定义的变量，并设置成undefined；")]),t._v(" "),a("li",[t._v("全局对象是非常重要的，我们平时之所以能够使用这些全局方法和类，都是在这个全局对象中获取的；")])])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" GlobalObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Math")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'类'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'类'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'类'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'函数'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'函数'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GlobalObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h3",{attrs:{id:"_6-3-执行上下文栈-调用栈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-执行上下文栈-调用栈"}},[t._v("#")]),t._v(" 6.3.执行上下文栈（调用栈）")]),t._v(" "),a("p",[t._v("了解了什么是全局对象后，下面就来聊聊代码具体执行的地方。JS引擎为了执行代码，引擎内部会有一个"),a("strong",[t._v("执行上下文栈（Execution Context Stack，简称ECS）")]),t._v("，它是用来执行代码的"),a("strong",[t._v("调用栈")]),t._v("。`")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ECS如何执行？先执行谁呢？")])]),t._v(" "),a("ul",[a("li",[t._v("无疑是先执行我们的全局代码块；")]),t._v(" "),a("li",[t._v("在执行前全局代码会构建一个"),a("strong",[t._v("全局执行上下文（Global Execution Context，简称GEC）")]),t._v("；")]),t._v(" "),a("li",[t._v("一开始GEC就会被放入到ECS中执行；")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("那么全局执行上下文（GEC）包含那些内容呢？")])]),t._v(" "),a("ul",[a("li",[t._v("第一部分：执行代码前。\n"),a("ul",[a("li",[t._v("在转成抽象语法树之前，会将全局定义的变量、函数等加入到Global Object中，也就是上面初始化全局对象的过程；")]),t._v(" "),a("li",[t._v("但是并不会真正赋值（表现为undefined），所以这个过程也称之为"),a("strong",[t._v("变量的作用域提升（hoisting）")]),t._v("；")])])]),t._v(" "),a("li",[t._v("第二部分：代码执行。\n"),a("ul",[a("li",[t._v("对变量进行赋值，或者执行其它函数等；")])])])])]),t._v(" "),a("li",[a("p",[t._v("下面就通过一幅图，来看看GEC被放入ECS后的表现形式：")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOrl8I.png",alt:"jOrl8I.png"}})]),t._v(" "),a("h3",{attrs:{id:"_6-4-调用栈调用gec的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-调用栈调用gec的过程"}},[t._v("#")]),t._v(" 6.4.调用栈调用GEC的过程")]),t._v(" "),a("h5",{attrs:{id:"接下来-将全局代码复杂化一点-再来看看调用栈调用全局执行上下文-gec-的过程。实例代码如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接下来-将全局代码复杂化一点-再来看看调用栈调用全局执行上下文-gec-的过程。实例代码如下"}},[t._v("#")]),t._v(" 接下来，将全局代码复杂化一点，再来看看调用栈调用全局执行上下文（GEC）的过程。实例代码如下：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'curry'")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I am a coder'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("h4",{attrs:{id:"调用栈调用过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用栈调用过程"}},[t._v("#")]),t._v(" 调用栈调用过程：")]),t._v(" "),a("ul",[a("li",[t._v("1、初始化全局对象。\n"),a("ul",[a("li",[t._v("这里需要注意的是函数存放的是地址，会指向函数对象，与普通变量有所不同；")]),t._v(" "),a("li",[t._v("从上往下解析JS代码，当解析到foo函数时，因为foo不是普通变量，并不会赋为undefined，JS引擎会在堆内存中开辟一块空间存放foo函数，在全局对象中引用其地址；")]),t._v(" "),a("li",[t._v("这个开辟的函数存储空间最主要存放了该函数的"),a("strong",[t._v("父级作用域")]),t._v("和函数的"),a("strong",[t._v("执行体代码块")]),t._v("；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOsnyV.png",alt:"jOsnyV.png"}})]),t._v(" "),a("ul",[a("li",[t._v("2、构建一个全局执行上下文（GEC），代码执行前将VO的内存地址指向GlobalObject（GO）。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOsMeU.png",alt:"jOsMeU.png"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("3、将全局执行上下文（GEC）放入执行上下文栈（ECS）中。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOslo4.png",alt:"jOslo4.png"}})])]),t._v(" "),a("li",[a("p",[t._v("4、从上往下开始执行全局代码，依次对GO对象中的全局变量进行赋值。")]),t._v(" "),a("ul",[a("li",[t._v("当执行"),a("code",[t._v("var name = 'curry'")]),t._v("时，就从VO（对应的就是GO）中找到name属性赋值为curry；")]),t._v(" "),a("li",[t._v("接下来执行"),a("code",[t._v("console.log(message)")]),t._v("，就从VO中找到message，注意"),a("strong",[t._v("此时的message还为undefined")]),t._v("，因为message真正赋值在下一行代码，所以就直接打印undefined（也就是我们经常说的变量作用域提升）；")]),t._v(" "),a("li",[t._v("后面就依次进行赋值，执行到"),a("code",[t._v("var result = num1 + num2")]),t._v("，也是从VO中找到num1和num2两个属性的值进行相加，然后赋值给result，result最终就为50；")]),t._v(" "),a("li",[t._v("最后执行到"),a("code",[t._v("foo()")]),t._v("，也就是需要去执行foo函数了，这里的操作是比较特殊的，涉及到"),a("strong",[t._v("函数执行上下文")]),t._v("，下面来详细了解；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOs8Y9.png",alt:"jOs8Y9.png"}})]),t._v(" "),a("h3",{attrs:{id:"_6-5-函数执行上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-函数执行上下文"}},[t._v("#")]),t._v(" 6.5.函数执行上下文")]),t._v(" "),a("h5",{attrs:{id:"在执行全局代码遇到函数如何执行呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在执行全局代码遇到函数如何执行呢"}},[t._v("#")]),t._v(" 在执行全局代码遇到函数如何执行呢？")]),t._v(" "),a("ul",[a("li",[t._v("在执行的过程中遇到函数，就会根据函数体创建一个"),a("strong",[t._v("函数执行上下文（Functional Execution Context，简称FEC）")]),t._v("，并且加入到执行上下文栈（ECS）中。")]),t._v(" "),a("li",[t._v("函数执行上下文（FEC）包含三部分内容：\n"),a("ul",[a("li",[t._v("AO：在解析函数时，会创建一个"),a("strong",[t._v("Activation Objec（AO）")]),t._v("；")]),t._v(" "),a("li",[t._v("作用域链：由"),a("strong",[t._v("函数VO和父级VO组成")]),t._v("，查找是一层层往外层查找；")]),t._v(" "),a("li",[t._v("this指向：this绑定的值，在函数执行时确定；")])])]),t._v(" "),a("li",[t._v("其实全局执行上下文（GEC）也有自己的作用域链和this指向，只是它对应的作用域链就是自己本身，而this指向为window。")])]),t._v(" "),a("h5",{attrs:{id:"继续来看上面的代码执行-6-4中的代码还有foo执行没有讲完-当执行到foo-时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#继续来看上面的代码执行-6-4中的代码还有foo执行没有讲完-当执行到foo-时"}},[t._v("#")]),t._v(" 继续来看上面的代码执行（6.4中的代码还有foo执行没有讲完）---\x3e当执行到"),a("code",[t._v("foo()")]),t._v("时：")]),t._v(" "),a("ul",[a("li",[t._v("先找到foo函数的存储地址，然后"),a("strong",[t._v("解析foo函数")]),t._v("，生成函数的AO；")]),t._v(" "),a("li",[t._v("根据AO生成函数执行上下文（FEC），并将其放入执行上下文栈（ECS）中；")]),t._v(" "),a("li",[t._v("开始执行foo函数内代码，依次找到AO中的属性并赋值，当执行"),a("code",[t._v("console.log(name)")]),t._v("时，就会去foo的VO（对应的就是foo函数的AO）中找到name属性值并打印；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOsrYd.png",alt:"jOsrYd.png"}})]),t._v(" "),a("h3",{attrs:{id:"_6-6-变量环境和记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-变量环境和记录"}},[t._v("#")]),t._v(" 6.6.变量环境和记录")]),t._v(" "),a("h5",{attrs:{id:"上文中提到了很多次vo-那么vo到底是什么呢-下面从ecma新旧版本规范中来谈谈vo。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上文中提到了很多次vo-那么vo到底是什么呢-下面从ecma新旧版本规范中来谈谈vo。"}},[t._v("#")]),t._v(" 上文中提到了很多次VO，那么VO到底是什么呢？下面从ECMA新旧版本规范中来谈谈VO。")]),t._v(" "),a("ul",[a("li",[t._v("在早期ECMA的版本规范中：每一个执行上下文会被关联到一个"),a("strong",[t._v("变量环境（Variable Object，简称VO）")]),t._v("，在源代码中的"),a("strong",[t._v("变量和函数声明")]),t._v("会被作为属性添加到VO中。对应函数来说，参数也会被添加到VO中。\n"),a("ul",[a("li",[t._v("也就是上面所创建的GO或者AO都会被关联到变量环境（VO）上，可以通过VO查找到需要的属性；")]),t._v(" "),a("li",[t._v("规定了VO为Object类型，上文所提到的GO和AO都是Object类型；")])])]),t._v(" "),a("li",[t._v("在最新ECMA的版本规范中：每一个执行上下文会关联到一个"),a("strong",[t._v("变量环境（Variable Environment，简称VE）")]),t._v("，在执行代码中"),a("strong",[t._v("变量和函数的声明")]),t._v("会作为**环境记录（Environment Record）**添加到变量环境中。对于函数来说，参数也会被作为环境记录添加到变量环境中。\n"),a("ul",[a("li",[t._v("也就是相比于早期的版本规范，对于变量环境，已经去除了VO这个概念，提出了一个新的概念VE；")]),t._v(" "),a("li",[t._v("没有规定VE必须为Object，不同的JS引擎可以使用不同的类型，作为一条环境记录添加进去即可；")]),t._v(" "),a("li",[t._v("虽然新版本规范将变量环境改成了VE，但是JavaScript的执行过程还是不变的，只是关联的变量环境不同，将VE看成VO即可；")])])])]),t._v(" "),a("h2",{attrs:{id:"_7、全局代码执行过程-函数嵌套-加深理解js执行过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7、全局代码执行过程-函数嵌套-加深理解js执行过程"}},[t._v("#")]),t._v(" 7、全局代码执行过程（函数嵌套）：加深理解js执行过程")]),t._v(" "),a("h3",{attrs:{id:"_7-1-了解了上面相关的概念和调用流程之后-就来看一下存在函数嵌套调用的代码是如何执行的-以及执行过程中的一些细节-以下面代码为例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-了解了上面相关的概念和调用流程之后-就来看一下存在函数嵌套调用的代码是如何执行的-以及执行过程中的一些细节-以下面代码为例"}},[t._v("#")]),t._v(" 7.1.了解了上面相关的概念和调用流程之后，就来看一下存在函数嵌套调用的代码是如何执行的，以及执行过程中的一些细节，以下面代码为例：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'global'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("h3",{attrs:{id:"_7-2-初始化全局对象-go-执行全局代码前创建gec-并将go关联到vo-然后将gec加入ecs中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-初始化全局对象-go-执行全局代码前创建gec-并将go关联到vo-然后将gec加入ecs中"}},[t._v("#")]),t._v(" 7.2.初始化全局对象（GO）,执行全局代码前创建GEC，并将GO关联到VO，然后将GEC加入ECS中：")]),t._v(" "),a("ul",[a("li",[t._v("foo函数存储空间中指定的父级作用域为全局对象；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOsj7F.png",alt:"jOsj7F.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-3-开始执行全局代码-从上往下依次给全局属性赋值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-开始执行全局代码-从上往下依次给全局属性赋值"}},[t._v("#")]),t._v(" 7.3.开始执行全局代码，从上往下依次给全局属性赋值：")]),t._v(" "),a("ul",[a("li",[t._v("给message属性赋值为global；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOySh9.png",alt:"jOySh9.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-4-执行到foo函数调用-准备执行foo函数前-创建foo函数的ao"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-执行到foo函数调用-准备执行foo函数前-创建foo函数的ao"}},[t._v("#")]),t._v(" 7.4.执行到foo函数调用，准备执行foo函数前，创建foo函数的AO：")]),t._v(" "),a("ul",[a("li",[t._v("bar函数存储空间中指定父级作用域为foo函数的AO；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOy9pR.png",alt:"jOy9pR.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-5-创建foo函数的fec-并加入到ecs中-然后开始执行foo函数体内的代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-创建foo函数的fec-并加入到ecs中-然后开始执行foo函数体内的代码"}},[t._v("#")]),t._v(" 7.5.创建foo函数的FEC，并加入到ECS中，然后开始执行foo函数体内的代码")]),t._v(" "),a("ul",[a("li",[t._v("根据foo函数调用的传参，给形参m赋值为30，接着给message属性赋值为foo；")]),t._v(" "),a("li",[t._v("所以，m打印结果为30；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOyZAe.png",alt:"jOyZAe.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-6-执行到bar函数调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-6-执行到bar函数调用"}},[t._v("#")]),t._v(" 7.6.执行到bar函数调用")]),t._v(" "),a("ul",[a("li",[t._v("执行到bar函数调用，准备执行bar函数前，创建bar函数的AO")]),t._v(" "),a("li",[t._v("bar函数中没有定义属性和声明函数，以空对象表示；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOyQjP.png",alt:"jOyQjP.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-7-创建bar函数的fec"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-7-创建bar函数的fec"}},[t._v("#")]),t._v(" 7.7.创建bar函数的FEC")]),t._v(" "),a("ul",[a("li",[t._v("创建bar函数的FEC，并加入到ECS中，然后开始执行bar函数体内的代码：")]),t._v(" "),a("li",[t._v("执行"),a("code",[t._v("console.log(message)")]),t._v("，会先去bar函数自己的VO中找message，没有找到就往上层作用域的VO中找；")]),t._v(" "),a("li",[t._v("这里bar函数的父级作用域为foo函数，所以找到foo函数VO中的message为foo，"),a("strong",[t._v("打印结果为foo")]),t._v("；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOyJAg.png",alt:"jOyJAg.png"}})]),t._v(" "),a("ul",[a("li",[t._v("全局中所有代码执行完成，bar函数执行上下文出栈，bar函数AO对象失去了引用，进行销毁。")]),t._v(" "),a("li",[t._v("接着foo函数执行上下文出栈，foo函数AO对象失去了引用，进行销毁，同样，foo函数AO对象销毁后，bar函数的存储空间也失去引用，进行销毁。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/22/jOyBuV.png",alt:"jOyBuV.png"}})]),t._v(" "),a("h3",{attrs:{id:"_7-8-概念名词总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-8-概念名词总结"}},[t._v("#")]),t._v(" 7.8.概念名词总结：")]),t._v(" "),a("ul",[a("li",[t._v("函数在执行前就已经确定了其父级作用域，与函数在哪执行没有关系，以函数声明的位置为主；")]),t._v(" "),a("li",[t._v("执行代码查找变量属性时，会沿着"),a("strong",[t._v("作用域链")]),t._v("一层层往上查找（沿着VO往上找），如果一直找到全局对象中还没有该变量属性，就会报错未定义；")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("名词")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("解释")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("ECS")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行上下文栈（Execution Context Stack），也可称为调用栈，以栈的形式调用创建的执行上下文")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GEC")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("全局执行上下文（Global Execution Context），在执行全局代码前创建")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FEC")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("函数执行上下文（Functional Execution Context），在执行函数前创建")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("VO")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Variable Object，早期ECMA规范中的变量环境，对应Object")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("VE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Variable Environment，最新ECMA规范中的变量环境，对应环境记录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GO")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("全局对象（Global Object），解析全局代码时创建，GEC中关联的VO就是GO")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("AO")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("函数对象（Activation Object），解析函数体代码时创建，FEC中关联的VO就是AO")])])])]),t._v(" "),a("h2",{attrs:{id:"_8、作用域和作用域链-scope-chain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8、作用域和作用域链-scope-chain"}},[t._v("#")]),t._v(" 8、作用域和作用域链（Scope Chain）")]),t._v(" "),a("ul",[a("li",[t._v("当进入到一个执行上下文时，执行上下文也会关联一个作用域链（Scope Chain）\n"),a("ul",[a("li",[t._v("作用域链是一个对象列表，用于变量标识符的求值；")]),t._v(" "),a("li",[t._v("当进入一个执行上下文时，这个作用域链被创建，并且根据代码类型，添加一系列的对象；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/07/23/jX94Mj.png",alt:"sdfsdfsd"}})]),t._v(" "),a("h2",{attrs:{id:"_9、作用域提升面试题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9、作用域提升面试题"}},[t._v("#")]),t._v(" 9、作用域提升面试题")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 面试题一")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//200")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 面试题二")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//undefined")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//200")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 面试题三")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//200")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//100")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 面试题四")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//undefined")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 面试题五")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*上面代码相当于：\n  var a = 100\n  b = 100\n  */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//100")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//报错：a is not defined")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);