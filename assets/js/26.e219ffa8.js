(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{614:function(n,s,a){"use strict";a.r(s);var t=a(5),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h2",{attrs:{id:"_1、代码共享方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、代码共享方案"}},[n._v("#")]),n._v(" 1、代码共享方案")]),n._v(" "),a("ul",[a("li",[n._v("我们已经学习了在JavaScript中可以通过模块化的方式将代码划分成一个个小的结构：\n"),a("ul",[a("li",[n._v("在以后的开发中我们就可以通过模块化的方式来封装自己的代码，并且封装成一个工具；")]),n._v(" "),a("li",[n._v("这个工具我们可以让同事通过导入的方式来使用，甚至你可以分享给世界各地的程序员来使用；")])])]),n._v(" "),a("li",[n._v("如果我们分享给世界上所有的程序员使用，有哪些方式呢？\n"),a("ul",[a("li",[n._v("方式一：上传到GitHub上、其他程序员通过GitHub下载我们的代码手动的引用；\n"),a("ul",[a("li",[n._v("缺点是大家必须知道你的代码GitHub的地址，并且从GitHub上手动下载；")]),n._v(" "),a("li",[n._v("需要在自己的项目中手动的引用，并且管理相关的依赖；")]),n._v(" "),a("li",[n._v("不需要使用的时候，需要手动来删除相关的依赖；")]),n._v(" "),a("li",[n._v("当遇到版本升级或者切换时，需要重复上面的操作；")]),n._v(" "),a("li",[n._v("显然，上面的方式是有效的，但是这种传统的方式非常麻烦，并且容易出错；")])])]),n._v(" "),a("li",[n._v("方式二：使用一个专业的工具来管理我们的代码：npm等包管理工具\n"),a("ul",[a("li",[n._v("我们通过工具将代码发布到特定的位置；")]),n._v(" "),a("li",[n._v("其他程序员直接通过工具来安装、升级、删除我们的工具代码；")]),n._v(" "),a("li",[n._v("显然，通过第二种方式我们可以更好的管理自己的工具包，其他人也可以更好的使用我们的工具包。")])])])])])]),n._v(" "),a("h2",{attrs:{id:"_2、npm包管理工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、npm包管理工具"}},[n._v("#")]),n._v(" 2、npm包管理工具")]),n._v(" "),a("h3",{attrs:{id:"_2-1-包管理工具npm的基本了解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-包管理工具npm的基本了解"}},[n._v("#")]),n._v(" 2.1.包管理工具npm的基本了解")]),n._v(" "),a("ul",[a("li",[n._v("包管理工具npm：\n"),a("ul",[a("li",[n._v("Node Package Manager，也就是"),a("strong",[n._v("Node包管理器")]),n._v("；")]),n._v(" "),a("li",[n._v("但是目前已经不仅仅是Node包管理器了（还出现许多其他包管理工具：yarn,pnpm等后续会具体学习），在前端项目中我们使用npm等包管理工具来管理依赖的包；")]),n._v(" "),a("li",[n._v("比如这些包：vue、vue-router、vuex、express、koa、react、react-dom、axios、babel、webpack等等；")])])]),n._v(" "),a("li",[n._v("如何下载和安装npm工具呢？\n"),a("ul",[a("li",[n._v("npm属于node的一个管理工具，所以我们需要先安装Node；")]),n._v(" "),a("li",[n._v("node管理工具："),a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[n._v("node官网地址"),a("OutboundLink")],1),n._v("，安装Node的过程会自动安装npm工具；")])])]),n._v(" "),a("li",[n._v("npm管理的包可以在哪里查看、搜索呢？\n"),a("ul",[a("li",[n._v("这是我们安装相关的npm包的官网；"),a("a",{attrs:{href:"https://www.npmjs.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("查看相关的npm包"),a("OutboundLink")],1)])])]),n._v(" "),a("li",[n._v("npm管理的包存放在哪里呢？\n"),a("ul",[a("li",[n._v("我们发布自己的包其实是发布到registry上面的；")]),n._v(" "),a("li",[n._v("当我们安装一个包时其实是从registry上面下载的包；")])])]),n._v(" "),a("li",[a("a",{attrs:{href:"https://docs.npmjs.com/cli-documentation/cli",target:"_blank",rel:"noopener noreferrer"}},[n._v("npm命令查阅"),a("OutboundLink")],1)])]),n._v(" "),a("h3",{attrs:{id:"_2-2-npm的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-npm的配置文件"}},[n._v("#")]),n._v(" 2.2.npm的配置文件")]),n._v(" "),a("ul",[a("li",[n._v("那么对于一个项目来说，我们如何使用npm来管理这么多包呢？\n"),a("ul",[a("li",[n._v("事实上，我们每一个项目都会有一个对应的配置文件，无论是前端项目（Vue、React）还是后端项目（Node）；")]),n._v(" "),a("li",[n._v("这个配置文件会记录着你项目的名称、版本号、项目描述等；")]),n._v(" "),a("li",[n._v("也会记录着你项目所依赖的其他库的信息和依赖库的版本号；")])])]),n._v(" "),a("li",[n._v("这个配置文件就是"),a("strong",[n._v("package.json")])]),n._v(" "),a("li",[n._v("那么这个配置文件如何得到呢？\n"),a("ul",[a("li",[n._v("方式一：手动从零创建项目，npm init –y")]),n._v(" "),a("li",[n._v("方式二：通过脚手架创建项目，脚手架会帮助我们生成package.json，并且里面有相关的配置")])])])]),n._v(" "),a("h3",{attrs:{id:"_2-3-常见的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-常见的配置文件"}},[n._v("#")]),n._v(" 2.3.常见的配置文件")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0VBSU.png",alt:"v0VBSU.png"}})]),n._v(" "),a("h3",{attrs:{id:"_2-4-配置文件常见的属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-配置文件常见的属性"}},[n._v("#")]),n._v(" 2.4.配置文件常见的属性")]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("必须填写的属性")]),n._v("："),a("strong",[n._v("name")]),n._v("、"),a("strong",[n._v("version")]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("name")]),n._v("是项目的名称；")]),n._v(" "),a("li",[a("strong",[n._v("version")]),n._v("是当前项目的版本号；")]),n._v(" "),a("li",[a("strong",[n._v("description")]),n._v("是描述信息，很多时候是作为项目的基本描述；")]),n._v(" "),a("li",[a("strong",[n._v("author")]),n._v("是作者相关信息（发布时用到）；")]),n._v(" "),a("li",[a("strong",[n._v("license")]),n._v("是开源协议（发布时用到）；")])])]),n._v(" "),a("li",[a("strong",[n._v("private属性")]),n._v("：\n"),a("ul",[a("li",[n._v("private属性记录当前的项目是否是私有的；\n"),a("ul",[a("li",[n._v("当值为true时，npm是不能发布它的，这是防止私有项目或模块发布出去的方式；")])])])])]),n._v(" "),a("li",[a("strong",[n._v("main属性")]),n._v("：\n"),a("ul",[a("li",[n._v("设置程序的入口。\n"),a("ul",[a("li",[n._v("比如我们使用axios模块 const axios = require('axios');")]),n._v(" "),a("li",[n._v("如果有main属性，实际上是找到对应的main属性查找文件的；")])])])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0VRFx.png",alt:"v0VRFx.png"}})]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("scripts属性")]),n._v(" "),a("ul",[a("li",[n._v("scripts属性用于配置一些脚本命令，以键值对的形式存在；")]),n._v(" "),a("li",[n._v("配置后我们可以通过 npm run 命令的key来执行这个命令；")]),n._v(" "),a("li",[n._v("npm start和npm run start的区别是什么？它们是等价的；\n"),a("ul",[a("li",[n._v("对于常用的 start、 test、stop、restart可以省略掉run直接通过 npm start等方式运行；（但是其他的不行哟）")])])])])]),n._v(" "),a("li",[a("strong",[n._v("dependencies属性")]),n._v("(生产环境开发环境都需要依赖的包) -> "),a("code",[n._v("相当于打包后需要依赖的包")]),n._v(" "),a("ul",[a("li",[n._v("dependencies属性是指定无论开发环境还是生成环境都需要依赖的包；")]),n._v(" "),a("li",[n._v("通常是我们项目实际开发用到的一些库模块vue、vuex、vue-router、react、react-dom、axios等等；")]),n._v(" "),a("li",[n._v("与之对应的是devDependencies；")])])]),n._v(" "),a("li",[a("strong",[n._v("devDependencies属性")]),n._v("(生产环境不需要；但开发环境需要依赖的包) -> "),a("code",[n._v("相当于打包前需要依赖的包")]),n._v(" "),a("ul",[a("li",[n._v("一些包在生成环境是不需要的，比如webpack、babel等；")]),n._v(" "),a("li",[n._v("这个时候我们会通过 npm install webpack --save-dev或者 npm install webpack -D，将它安装到devDependencies属性中；")])])]),n._v(" "),a("li",[a("strong",[n._v("peerDependencies属性")]),n._v(" "),a("ul",[a("li",[n._v("还有一种项目依赖关系是对等依赖，也就是你依赖的一个包"),a("code",[n._v("element-plus")]),n._v("，它必须是以另外一个宿主包"),a("code",[n._v("vue3")]),n._v("为前提的；")]),n._v(" "),a("li",[n._v("比如element-plus是依赖于vue3的，ant design是依赖于react、react-dom；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0mQW6.png",alt:"v0mQW6.png"}})]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("engines（引擎）属性")])]),n._v(" "),a("li",[n._v("engines属性用于指定Node和NPM的版本号；")]),n._v(" "),a("li",[n._v("在安装的过程中，会先检查对应的引擎版本，如果不符合就会报错；")]),n._v(" "),a("li",[n._v('事实上也可以指定所在的操作系统 "os" : [ "darwin", "linux" ]，如果不是指定的操作系统，项目就跑不起来；【很少用到】')]),n._v(" "),a("li",[a("strong",[n._v("browserslist属性")])]),n._v(" "),a("li",[n._v("用于配置打包后的JavaScript"),a("strong",[n._v("浏览器的兼容")]),n._v("情况，参考；")]),n._v(" "),a("li",[n._v("否则我们需要手动的添加polyfills来让支持某些语法；")]),n._v(" "),a("li",[n._v("也就是说它是为webpack等打包工具服务的一个属性（这里不是详细讲解webpack等工具的工作原理，所以不再给出详情）；")]),n._v(" "),a("li",[n._v("后续学习webpack再进行详细学习")])]),n._v(" "),a("h3",{attrs:{id:"_2-5-依赖的版本管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-依赖的版本管理"}},[n._v("#")]),n._v(" 2.5.依赖的版本管理")]),n._v(" "),a("ul",[a("li",[n._v("我们会发现安装的依赖版本出现：^2.0.3或~2.0.3，这是什么意思呢？")]),n._v(" "),a("li",[n._v("npm的包通常需要遵从semver版本规范：\n"),a("ul",[a("li",[n._v("semver："),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[n._v("semver"),a("OutboundLink")],1)]),n._v(" "),a("li",[n._v("npm semver："),a("a",{attrs:{href:"https://docs.npmjs.com/misc/semver",target:"_blank",rel:"noopener noreferrer"}},[n._v("npm semver"),a("OutboundLink")],1)])])]),n._v(" "),a("li",[n._v("semver版本规范是X.Y.Z：\n"),a("ul",[a("li",[n._v("X主版本号（major）：当你做了不兼容的 API 修改（可能不兼容之前的版本）；"),a("code",[n._v("大版本更新")])]),n._v(" "),a("li",[n._v("Y次版本号（minor）：当你做了向下兼容的功能性新增（新功能增加，但是兼容之前的版本）；"),a("code",[n._v("在大版本下新增新功能新特性")])]),n._v(" "),a("li",[n._v("Z修订号（patch）：当你做了向下兼容的问题修正（没有新功能，修复了之前版本的bug）；"),a("code",[n._v("修复版本存在的一些bug")])])])]),n._v(" "),a("li",[n._v("我们这里解释一下 ^和~的区别：\n"),a("ul",[a("li",[n._v("x.y.z：表示一个明确的版本号；")]),n._v(" "),a("li",[n._v("^x.y.z：表示x是保持不变的，y和z永远安装最新的版本；")]),n._v(" "),a("li",[n._v("~x.y.z：表示x和y保持不变的，z永远安装最新的版本；")])])])]),n._v(" "),a("h3",{attrs:{id:"_2-6-npm-install-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-npm-install-命令"}},[n._v("#")]),n._v(" 2.6.npm install 命令")]),n._v(" "),a("ul",[a("li",[a("p",[n._v("安装npm包分两种情况：")]),n._v(" "),a("ul",[a("li",[n._v("全局安装（global install）："),a("code",[n._v("npm install webpack -g")]),n._v(";")]),n._v(" "),a("li",[n._v("项目（局部）安装（local install）： "),a("code",[n._v("npm install webpack")])])])]),n._v(" "),a("li",[a("p",[n._v("全局安装")])]),n._v(" "),a("li",[a("p",[n._v("全局安装是直接将某个包安装到全局：")])]),n._v(" "),a("li",[a("p",[n._v("比如全局安装yarn："),a("code",[n._v("npm install yarn -g")])])]),n._v(" "),a("li",[a("p",[n._v("但是很多人对全局安装有一些误会：")]),n._v(" "),a("ul",[a("li",[n._v("通常使用npm全局安装的包都是一些工具包：yarn、webpack等；")]),n._v(" "),a("li",[n._v("并不是类似于 axios、express、koa等库文件；")]),n._v(" "),a("li",[n._v("所以全局安装了之后并不能让我们在所有的项目中使用 axios等库；")])])]),n._v(" "),a("li",[a("p",[a("strong",[n._v("项目安装")])])]),n._v(" "),a("li",[a("p",[n._v("项目安装会在当前目录下生成一个 node_modules 文件夹，我们之前学习require查找顺序时有学习过这个包在什么情况下被查找；")])]),n._v(" "),a("li",[a("p",[n._v("局部安装分为开发时依赖和生产时依赖：")])])]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 默认安装开发和生产依赖")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" axios\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" i axios\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 安装开发依赖")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" webpack --save-dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" webpack -D\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" i webpack –D\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 根据package.json中的依赖包 进行安装")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 安装依赖包的具体版本号")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" webpack@3.6.0\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br")])]),a("h3",{attrs:{id:"_2-7-npm-install-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-npm-install-原理"}},[n._v("#")]),n._v(" 2.7.npm install 原理")]),n._v(" "),a("ul",[a("li",[n._v("很多前端小伙伴之前应该已经会了 npm install ，但是你是否思考过它的内部原理呢？\n"),a("ul",[a("li",[n._v("执行 npm install它背后帮助我们完成了什么操作？")]),n._v(" "),a("li",[n._v("我们会发现还有一个称之为package-lock.json的文件，它的作用是什么？")]),n._v(" "),a("li",[n._v("从npm5开始，npm支持缓存策略（来自yarn的压力），缓存有什么作用呢？\n"),a("ul",[a("li",[n._v("由于npm5之前，没有缓存策略；而yarn却支持缓存策略；导致yarn慢慢使用的人数变多；所以npm5版本支持了缓存策略")])])])])]),n._v(" "),a("li",[n._v("这是一幅 npm install 的原理图：")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0VWY6.png",alt:"v0VWY6.png"}})]),n._v(" "),a("h3",{attrs:{id:"_2-8-npm-install-原理图解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-npm-install-原理图解析"}},[n._v("#")]),n._v(" 2.8.npm install 原理图解析")]),n._v(" "),a("ul",[a("li",[n._v("npm install会检测是有package-lock.json文件：\n"),a("ul",[a("li",[a("strong",[n._v("没有lock文件")]),n._v(" "),a("ul",[a("li",[n._v("分析依赖关系，这是因为我们可能包会依赖其他的包，并且多个包之间会产生相同依赖的情况；")]),n._v(" "),a("li",[n._v("从registry仓库中下载压缩包（如果我们设置了镜像，那么会从镜像服务器下载压缩包）；")]),n._v(" "),a("li",[n._v("获取到压缩包后会对压缩包进行缓存（从npm5开始有的）；")]),n._v(" "),a("li",[n._v("将压缩包解压到项目的node_modules文件夹中（前面我们讲过，require的查找顺序会在该包下面查找）")])])]),n._v(" "),a("li",[a("strong",[n._v("有lock文件")]),n._v(" "),a("ul",[a("li",[n._v("检测lock中包的版本是否和package.json中一致（会按照semver版本规范检测）；\n"),a("ul",[a("li",[n._v("不一致，那么会重新构建依赖关系，直接会走顶层的流程；")]),n._v(" "),a("li",[n._v("一致的情况下，会去优先查找缓存\n"),a("ul",[a("li",[n._v("没有找到，会从registry仓库下载，直接走顶层流程；")]),n._v(" "),a("li",[n._v("查找到，会获取缓存中的压缩文件，并且将压缩文件解压到node_modules文件夹中；")])])])])])])])])])]),n._v(" "),a("h3",{attrs:{id:"_2-9-package-lock-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-package-lock-json"}},[n._v("#")]),n._v(" 2.9.package-lock.json")]),n._v(" "),a("h4",{attrs:{id:"package-lock-json文件解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-lock-json文件解析"}},[n._v("#")]),n._v(" package-lock.json文件解析：")]),n._v(" "),a("ul",[a("li",[n._v("name：项目的名称；")]),n._v(" "),a("li",[n._v("version：项目的版本；")]),n._v(" "),a("li",[n._v("lockfileVersion：lock文件的版本；")]),n._v(" "),a("li",[n._v("requires：使用requires来跟踪模块的依赖关系；")]),n._v(" "),a("li",[n._v("dependencies：项目的依赖\n"),a("ul",[a("li",[n._v("当前项目依赖axios，但是axios依赖follow-redireacts；")]),n._v(" "),a("li",[n._v("axios中的属性如下：\n"),a("ul",[a("li",[n._v("version表示实际安装的axios的版本；")]),n._v(" "),a("li",[n._v("resolved用来记录下载的地址，registry仓库中的位置；")]),n._v(" "),a("li",[n._v("requires/dependencies记录当前模块的依赖；")]),n._v(" "),a("li",[n._v("integrity用来从缓存中获取索引，再通过索引去获取压缩包文件；")])])])])])]),n._v(" "),a("p",[a("a",{attrs:{href:"https://imgtu.com/i/v0l511",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0l511.png",alt:"v0l511.png"}}),a("OutboundLink")],1)]),n._v(" "),a("h3",{attrs:{id:"_2-10-npm其他命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-npm其他命令"}},[n._v("#")]),n._v(" 2.10.npm其他命令")]),n._v(" "),a("ul",[a("li",[n._v("我们这里再介绍几个比较常用的：")])]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 卸载某个依赖包：")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" uninstall package\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" uninstall package --save-dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" uninstall package -D\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" uninstall -g package \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 强制重新build")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" rebuild\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 清除缓存")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("npm")]),n._v(" cache clean\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("ul",[a("li",[n._v("npm的命令其实是非常多的：\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.npmjs.com/cli-documentation/cli",target:"_blank",rel:"noopener noreferrer"}},[n._v("npm命令查阅"),a("OutboundLink")],1)]),n._v(" "),a("li",[n._v("更多的命令，可以根据需要查阅官方文档")])])])]),n._v(" "),a("h3",{attrs:{id:"_2-11-npm发布自己的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-npm发布自己的包"}},[n._v("#")]),n._v(" 2.11.npm发布自己的包")]),n._v(" "),a("ul",[a("li",[n._v("注册npm账号："),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[n._v("注册npm账号"),a("OutboundLink")],1),n._v("  -> 选择sign up")]),n._v(" "),a("li",[n._v("在命令行登录： "),a("code",[n._v("npm login")])]),n._v(" "),a("li",[n._v("修改package.json")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/16/v0UYnA.png",alt:"v0UYnA.png"}})]),n._v(" "),a("ul",[a("li",[a("p",[n._v("发布到npm registry上: "),a("code",[n._v("npm publish")])])]),n._v(" "),a("li",[a("p",[n._v("更新仓库：")]),n._v(" "),a("ul",[a("li",[n._v("修改版本号(最好符合semver规范)")]),n._v(" "),a("li",[n._v("重新发布")])])]),n._v(" "),a("li",[a("p",[n._v("删除发布的包： "),a("code",[n._v("npm unpublish")])])]),n._v(" "),a("li",[a("p",[n._v("让发布的包过期："),a("code",[n._v("npm deprecate")])])])]),n._v(" "),a("h2",{attrs:{id:"_3、yarn工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、yarn工具"}},[n._v("#")]),n._v(" 3、yarn工具")]),n._v(" "),a("ul",[a("li",[n._v("另一个node包管理工具yarn："),a("a",{attrs:{href:"https://yarnpkg.com/",target:"_blank",rel:"noopener noreferrer"}},[n._v("yarn官网"),a("OutboundLink")],1),n._v(" "),a("ul",[a("li",[n._v("yarn是由Facebook、Google、Exponent 和 Tilde 联合推出了一个新的 JS 包管理工具；")]),n._v(" "),a("li",[n._v("yarn 是为了弥补 早期npm 的一些缺陷而出现的；")]),n._v(" "),a("li",[n._v("早期的npm存在很多的缺陷，比如安装依赖速度很慢、版本依赖混乱等等一系列的问题；")]),n._v(" "),a("li",[n._v("虽然从npm5版本开始，进行了很多的升级和改进，但是依然很多人喜欢使用yarn；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBiOdx.png",alt:"vBiOdx.png"}})]),n._v(" "),a("h2",{attrs:{id:"_4、cnpm工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、cnpm工具"}},[n._v("#")]),n._v(" 4、cnpm工具")]),n._v(" "),a("ul",[a("li",[n._v("由于一些特殊的原因，某些情况下我们没办法很好的从 https://registry.npmjs.org下载下来一些需要的包。")]),n._v(" "),a("li",[n._v("查看npm镜像："),a("code",[n._v("npm config get registry # npm config get registry")])]),n._v(" "),a("li",[n._v("我们可以直接设置npm的镜像："),a("code",[n._v("npm config set registry https://registry.npm.taobao.org")])]),n._v(" "),a("li",[n._v("但是对于大多数人来说（比如我），并不希望将npm镜像修改了：\n"),a("ul",[a("li",[n._v("第一，不太希望随意修改npm原本从官方下来包的渠道；")]),n._v(" "),a("li",[n._v("第二，担心某天淘宝的镜像挂了或者不维护了，又要改来改去；")])])]),n._v(" "),a("li",[n._v("这个时候，我们可以使用cnpm，并且将cnpm设置为淘宝的镜像：\n"),a("ul",[a("li",[a("code",[n._v("npm install -g cnpm --registry=https://registry.npm.taobao.org")])]),n._v(" "),a("li",[a("code",[n._v("cnpm config get registry # https://r.npm.taobao.org/")])])])])]),n._v(" "),a("h2",{attrs:{id:"_5、npx命令-npm5-2之后自带的命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、npx命令-npm5-2之后自带的命令"}},[n._v("#")]),n._v(" 5、npx命令（npm5.2之后自带的命令）")]),n._v(" "),a("ul",[a("li",[n._v("npx是npm5.2之后自带的一个命令。\n"),a("ul",[a("li",[n._v("npx的作用非常多，但是比较常见的是使用它来调用项目中的某个模块的指令。")])])]),n._v(" "),a("li",[n._v("我们以webpack为例：\n"),a("ul",[a("li",[n._v("全局安装的是webpack5.1.3")]),n._v(" "),a("li",[n._v("项目局部安装的是webpack3.6.0")])])]),n._v(" "),a("li",[n._v("如果我在项目根目录下;终端执行 webpack --version使用的是哪一个命令呢？\n"),a("ul",[a("li",[n._v("显示结果会是 webpack 5.1.3，事实上使用的是全局的，为什么呢？")])])]),n._v(" "),a("li",[n._v("原因非常简单，在当前目录下找不到webpack时，就会去全局找，并且执行命令；")]),n._v(" "),a("li",[n._v("如何解决这个问题呢？")])]),n._v(" "),a("h4",{attrs:{id:"局部命令的执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#局部命令的执行"}},[n._v("#")]),n._v(" 局部命令的执行")]),n._v(" "),a("ul",[a("li",[a("p",[n._v("那么如何使用项目（局部）的webpack，常见的是两种方式：")]),n._v(" "),a("ul",[a("li",[a("p",[n._v("方式一：明确查找到node_module下面的webpack")]),n._v(" "),a("ul",[a("li",[n._v("在终端中使用如右命令（在项目根目录下）"),a("code",[n._v("./node_modules/.bin/webpack --version")])])])]),n._v(" "),a("li",[a("p",[n._v("方式二：在 scripts定义脚本，来执行webpack；")]),n._v(" "),a("ul",[a("li",[n._v("修改package.json中的scripts")])])])])])]),n._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[n._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[n._v('"webpack"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[n._v('"webpack --version"')]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("ul",[a("li",[n._v("当然还有另外一种方式：方式三：使用npx "),a("code",[n._v("npx webpack --version")]),n._v(" "),a("ul",[a("li",[n._v("npx的原理非常简单，它会到当前目录的node_modules/.bin目录下查找对应的命令；")])])]),n._v(" "),a("li",[a("strong",[n._v("注意")]),n._v("：根据上面局部命令执行案例进行测试，我们会发现，在局部执行webpack --version；也会找到局部安装的webpack3.6.0版本；这是因为现在webpack内部进行了处理(不需要加npx也会去当前目录下的node_muodules目录下找)\n"),a("ul",[a("li",[n._v("如果你用yarn进行测试；局部yarn1.21.0 跟 全局yarn1.22.19 即装了不一样的版本，然后在局部执行yarn --version；你会发现，打印的版本号是全局安装的版本yarn1.22.19；此时你想用局部的版本yarn1.21.0 前面应该加上npx：即npx yarn --version  就会打印局部的版本了yarn1.21.0")])])])]),n._v(" "),a("h2",{attrs:{id:"_6、pnpm工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、pnpm工具"}},[n._v("#")]),n._v(" 6、pnpm工具")]),n._v(" "),a("h3",{attrs:{id:"_6-1-什么是pnpm呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-什么是pnpm呢"}},[n._v("#")]),n._v(" 6.1.什么是pnpm呢？")]),n._v(" "),a("ul",[a("li",[n._v("什么是pnpm呢？我们来看一下官方的解释："),a("a",{attrs:{href:"https://pnpm.io/zh/",target:"_blank",rel:"noopener noreferrer"}},[n._v("pnpm官网"),a("OutboundLink")],1),n._v(" "),a("ul",[a("li",[n._v("pnpm：我们可以理解成是performant npm缩写；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBixJO.png",alt:"vBixJO.png"}})]),n._v(" "),a("ul",[a("li",[n._v("哪些公司在用呢？\n"),a("ul",[a("li",[n._v("包括Vue在内的很多公司或者开源项目的包管理工具都切换到了pnpm；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBF9QH.png",alt:"vBF9QH.png"}})]),n._v(" "),a("h3",{attrs:{id:"_6-2-硬链接和软连接的概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-硬链接和软连接的概念"}},[n._v("#")]),n._v(" 6.2.硬链接和软连接的概念")]),n._v(" "),a("ul",[a("li",[n._v("硬链接（hard link）：\n"),a("ul",[a("li",[n._v("硬链接（英语：hard link）是电脑文件系统中的多个文件平等地共享同一个文件存储单元；")]),n._v(" "),a("li",[n._v("删除一个文件名字后，还可以用其它名字继续访问该文件；")])])]),n._v(" "),a("li",[n._v("符号链接（软链接soft link、Symbolic link）：\n"),a("ul",[a("li",[n._v("符号链接（软链接、Symbolic link）是一类特殊的文件；")]),n._v(" "),a("li",[n._v("其包含有一条以绝对路径或者相对路径的形式指向其它文件或者目录的引用；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBFATP.png",alt:"vBFATP.png"}})]),n._v(" "),a("h3",{attrs:{id:"_6-3-硬链接和软连接的演练"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-硬链接和软连接的演练"}},[n._v("#")]),n._v(" 6.3.硬链接和软连接的演练")]),n._v(" "),a("ul",[a("li",[n._v("文件的拷贝：文件的拷贝每个人都非常熟悉，会在硬盘中复制出来一份新的文件数据")])]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# window:")]),n._v("\ncopy foo.js foo_copy.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# macos :")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" foo.js foo_copy.js\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBFPOA.png",alt:"vBFPOA.png"}})]),n._v(" "),a("ul",[a("li",[n._v("文件的硬链接")])]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# window: ")]),n._v("\nmklink /H aaa_hard.js aaa.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# macos : ")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ln")]),n._v(" foo.js foo_hard.js\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBFZY8.png",alt:"vBFZY8.png"}})]),n._v(" "),a("ul",[a("li",[n._v("文件的软连接：")])]),n._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# window: ")]),n._v("\nmklink aaa_soft.js aaa.js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# macos : ")]),n._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[n._v("ln")]),n._v(" -s foo.js foo_copy.js\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBFefS.png",alt:"vBFefS.png"}})]),n._v(" "),a("h3",{attrs:{id:"_6-4-pnpm到底做了什么呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-pnpm到底做了什么呢"}},[n._v("#")]),n._v(" 6.4.pnpm到底做了什么呢？")]),n._v(" "),a("ul",[a("li",[n._v("当使用 npm 或 Yarn 时，如果你有 100 个项目，并且所有项目都有一个相同的依赖包，那么， 你在硬盘上就需要保存 100 份该相同依赖包的副本。")]),n._v(" "),a("li",[n._v("如果是使用 pnpm，依赖包将被 存放在一个统一的位置，因此：\n"),a("ul",[a("li",[n._v("如果你对同一依赖包使用相同的版本，那么磁盘上只有这个依赖包的一份文件；")]),n._v(" "),a("li",[n._v("如果你对同一依赖包需要使用不同的版本，则仅有 版本之间不同的文件会被存储起来；")]),n._v(" "),a("li",[n._v("所有文件都保存在硬盘上的统一的位置：\n"),a("ul",[a("li",[n._v("当安装软件包时， 其包含的所有文件都会硬链接到此位置，而不会占用 额外的硬盘空间；")]),n._v(" "),a("li",[n._v("这让你可以在项目之间方便地共享相同版本的 依赖包；")])])])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBF1wq.png",alt:"vBF1wq.png"}})]),n._v(" "),a("h3",{attrs:{id:"_6-5-pnpm创建非扁平的-node-modules-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-pnpm创建非扁平的-node-modules-目录"}},[n._v("#")]),n._v(" 6.5.pnpm创建非扁平的 node_modules 目录")]),n._v(" "),a("ul",[a("li",[n._v("当使用 npm 或 Yarn Classic 安装依赖包时，所有软件包都将被提升到 node_modules 的 根目录下。\n"),a("ul",[a("li",[n._v("其结果是，源码可以访问 本不属于当前项目所设定的依赖包；")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBF3T0.png",alt:"vBF3T0.png"}})]),n._v(" "),a("h3",{attrs:{id:"_6-6-pnpm的安装和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-pnpm的安装和使用"}},[n._v("#")]),n._v(" 6.6.pnpm的安装和使用")]),n._v(" "),a("ul",[a("li",[n._v("那么我们应该如何安装pnpm呢？\n"),a("ul",[a("li",[n._v("官网提供了很多种方式来安装pnpm：https://www.pnpm.cn/installation")]),n._v(" "),a("li",[n._v("因为我们每个同学都要求安装过Node，Node中有npm，所以我们通过npm安装即可；"),a("code",[n._v("npm install -g pnpm")])])])]),n._v(" "),a("li",[n._v("以下 是一个与 npm 等价命令的对照表，帮助你快速入门：")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/08/17/vBFGkV.png",alt:"vBFGkV.png"}})]),n._v(" "),a("ul",[a("li",[n._v("更多命令和用法可以参考pnpm的官网："),a("a",{attrs:{href:"https://pnpm.io/zh/",target:"_blank",rel:"noopener noreferrer"}},[n._v("pnpm官网"),a("OutboundLink")],1)])]),n._v(" "),a("h3",{attrs:{id:"_6-7-pnpm的存储store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-pnpm的存储store"}},[n._v("#")]),n._v(" 6.7.pnpm的存储store")]),n._v(" "),a("ul",[a("li",[n._v("在pnpm7.0之前，统一的存储位置是 "),a("code",[n._v("~/.pnpm-score")]),n._v("中的；")])]),n._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("C:\\Users\\Lyka\\AppData\\Local\\pnpm-store   //windows\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("ul",[a("li",[n._v("在pnpm7.0之后，统一的存储位置进行了更改："),a("code",[n._v("<pnpm home directory>/store")]),n._v(" "),a("ul",[a("li",[n._v("在 Linux 上，默认是 "),a("code",[n._v("~/.local/share/pnpm/store")])]),n._v(" "),a("li",[n._v("在 Windows 上： "),a("code",[n._v("%LOCALAPPDATA%/pnpm/store")])]),n._v(" "),a("li",[n._v("在 macOS 上： "),a("code",[n._v("~/Library/pnpm/store")])])])])]),n._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("C:\\Users\\Lyka\\AppData\\Local\\pnpm\\store  //windows\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("ul",[a("li",[n._v("我们可以通过一些终端命令获取这个目录：获取当前活跃的store目录："),a("code",[n._v("pnpm store path")])]),n._v(" "),a("li",[n._v("另外一个非常重要的store命令是prune（修剪）：从store中删除当前未被引用的包来释放store的空间:"),a("code",[n._v("pnpm store prune")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);